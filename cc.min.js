!function(factory){"use strict";"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define(factory):window.CC=factory()}(function(){var CC;!function(){var elementMap={},elementsSize=0,lazyElements=[],notLazyElements=[],chunkSize=800;CC=function(selector){if(-1!=selector.indexOf("*")){var asArray=[];for(var e in elementMap)asArray.push(elementMap[e]);return new ElementList(asArray,selector)}var id,idArray=selector.match(/#[a-zA-Z0-9]*/);idArray&&(id=idArray[0]);var classes=selector.replace(/#[a-zA-Z0-9]*/,"").split(" "),selecteds=[];for(var i in elementMap){var e=elementMap[i];if(!id||id==e.id){var add=!0;for(var j in classes){var c=classes[j];if(c.length&&!e.classes[c]){add=!1;break}}add&&selecteds.push(e)}}return new ElementList(selecteds,selector)},CC.classes={},CC.new=function(specs,opts){opts&&opts.lazy===!0&&opts.fixedOnScreen&&(delete opts.lazy,console&&console.warn("fixedOnScreen elements should not be lazy!"));var element=new Element(specs,opts);if(elementMap[element.id?element.id:elementsSize++]=element,opts&&opts.lazy===!0&&void 0!==element.x&&void 0!==element.y){var cX=parseInt(element.x/chunkSize),cY=parseInt(element.y/chunkSize);lazyElements[cX]||(lazyElements[cX]=[]),lazyElements[cX][cY]||(lazyElements[cX][cY]=[]),lazyElements[cX][cY].push(element)}else notLazyElements.push(element);return element},CC.def=function(classesStr,constructor){if(CC.isString(classesStr)&&CC.isFunction(constructor)){var classes=classesStr.split(" ");for(var i in classes){var c=classes[i];c.length&&(CC.classes[c]||(CC.classes[c]={constructors:[]}),CC.classes[c].constructors.push(constructor))}}},CC.clear=function(){CC.classes={},elementMap={},elementsSize=0,lazyElements=[],notLazyElements=[],CC.clearEvents()},CC.remove=function(el){el.trigger("remove");for(var i in elementMap)elementMap[i]==el&&delete elementMap[i];for(var j in notLazyElements)notLazyElements[j]==el&&delete notLazyElements[j];var cX=parseInt(el.x/chunkSize),cY=parseInt(el.y/chunkSize);if(lazyElements[cX]&&lazyElements[cX][cY])for(var k in lazyElements)lazyElements[cX][cY][k]==el&&delete lazyElements[cX][cY][k]},CC.areaSearch=function(area){if(null==area||void 0===area.x||void 0===area.y||void 0===area.w||void 0==area.h)return null;for(var selecteds=[],fromCX=parseInt(area.x/chunkSize)-1,fromCY=parseInt(area.y/chunkSize)-1,toCX=parseInt((area.x+area.w)/chunkSize)+1,toCY=parseInt((area.y+area.h)/chunkSize)+1,cX=fromCX;toCX>=cX;cX++)for(var cY=fromCY;toCY>=cY;cY++)if(lazyElements[cX]&&lazyElements[cX][cY]){var c=lazyElements[cX][cY];populateElementsInsideArea(c,selecteds,area)}return populateElementsInsideArea(notLazyElements,selecteds,area),new ElementList(selecteds,"area: "+JSON.stringify(area))};var populateElementsInsideArea=function(from,to,area){for(var i in from){var el=from[i];if(area.includeFixedOnScreen){if(area.includeFixedOnScreen===el.fixedOnScreen){to.push(el);continue}if(el.fixedOnScreen)continue}var w=el.w||0,h=el.h||0;el.x>area.x+area.w||el.x+w<area.x||el.y>area.y+area.h||el.y+h<area.y||to.push(el)}};CC.level=function(description,startX,startY,tileW,tileH){if(CC.isObject(description))for(var specs in description){var optsArr=description[specs];for(var i in optsArr)CC.new(specs,optsArr[i])}else if(CC.isArray(description)){if(void 0===startX||void 0===startY||void 0===tileW||void 0===tileH)return;var y=startY;for(var l in description){var line=description[l],x=startX;for(var i in line)CC.new(line[i],{x:x,y:y,w:tileW,h:tileH}),x+=tileW;y+=tileH}}}}();var eventEnvironmentBuilder=function(owner,shouldTrigger){var events=[];owner.bind=function(eventsStr,action){var evtAndNamespace=eventsStr.split("."),evtName=evtAndNamespace[0],namespace=evtAndNamespace[1]||"root";return evtName&&evtName.length&&(events[evtName]||(events[evtName]={}),events[evtName][namespace]||(events[evtName][namespace]=[]),action&&events[evtName][namespace].push(action)),{unbind:function(){owner.unbind(eventsStr,action)}}},owner.unbind=function(eventsStr,action){var evtAndNamespace=eventsStr.split("."),evtName=evtAndNamespace[0],namespace=evtAndNamespace[1]||"root";if(evtName&&evtName.length)if("root"!=namespace)if(action){if(events[evtName]&&events[evtName][namespace])for(var i in events[evtName][namespace])events[evtName][namespace][i]===action&&events[evtName][namespace].splice(i,1)}else events[evtName]&&delete events[evtName][namespace];else if(action)for(var i in events[evtName])for(var j in events[evtName][i])events[evtName][i][j]===action&&events[evtName][i].splice(j,1);else delete events[evtName];else if("root"!=namespace)if(action)for(var i in events)for(var j in events[i][namespace])events[i][namespace][j]===action&&events[i][namespace].splice(j,1);else for(var i in events)delete events[i][namespace]},owner.trigger=function(eventsStr){if(!shouldTrigger||shouldTrigger()){var evtAndNamespace=eventsStr.split("."),evtName=evtAndNamespace[0],namespace=evtAndNamespace[1]||"root",args=[].splice.call(arguments,1),callNamespace=function(n){var e=events[evtName][n];for(var i in e)e[i].apply(owner,args)};if(events[evtName])if("root"==namespace)for(var d in events[evtName])callNamespace(d);else events[evtName]&&events[evtName][namespace]&&callNamespace(namespace)}},owner.clearEvents=function(){events=[]}};eventEnvironmentBuilder(CC),function(){CC.isFunction=function(functionToCheck){return null!=functionToCheck&&"[object Function]"==={}.toString.call(functionToCheck)},CC.isString=function(stringToCheck){return"string"==typeof stringToCheck||stringToCheck instanceof String},CC.isNumber=function(numberToCheck){return!isNaN(parseFloat(numberToCheck))&&isFinite(numberToCheck)},CC.isArray=function(arrayToCheck){return null!=arrayToCheck&&"[object Array]"==={}.toString.call(arrayToCheck)},CC.isObject=function(objectToCheck){return!(null==objectToCheck||"object"!=typeof objectToCheck||CC.isFunction(objectToCheck)||CC.isString(objectToCheck)||CC.isNumber(objectToCheck)||CC.isArray(objectToCheck))}}(),function(){CC.merge=function(){for(var mergeRecursively=function(merged,obj){if(merged&&obj)for(var p in obj)CC.isObject(obj[p])?(merged[p]&&CC.isObject(merged[p])||(merged[p]={}),mergeRecursively(merged[p],obj[p])):merged[p]=obj[p]},i=1;i<arguments.length;i++)mergeRecursively(arguments[0],arguments[i]);return arguments[0]},CC.sort=function(){if(!(arguments.length<2)){var elements=arguments[0],props=[].splice.call(arguments,1);if(!CC.isArray(elements)){if(!CC.isObject(elements))return elements;var asArray=[];for(var e in elements)asArray.push(elements[e]);elements=asArray}if(!CC.isArray(props[0])||props[0].length<2)return elements;var sortOrderChecker=function(a,b,index){var prop=props[index][0],order=props[index][1],aprop=a[prop],bprop=b[prop];if(CC.isFunction(aprop)&&(aprop=aprop.call(a)),CC.isFunction(bprop)&&(bprop=bprop.call(b)),aprop==bprop){var nextIndex=index+1;return props.length>nextIndex&&props[nextIndex].length>1?sortOrderChecker(a,b,nextIndex):0}if(aprop>bprop)return"ASC"!==order?-1:1;if(bprop>aprop)return"ASC"!==order?1:-1;if(void 0==aprop){if(0>bprop)return"ASC"!==order?-1:1;if(bprop>0)return"ASC"!==order?1:-1}if(void 0==bprop){if(0>aprop)return"ASC"!==order?1:-1;if(aprop>0)return"ASC"!==order?-1:1}return 0};return elements.sort(function(a,b){return sortOrderChecker(a,b,0)})}}}(),function(){CC.normalizePoint=function(p){var result={x:p.x,y:p.y};return void 0==result.x&&p.length>1&&(result.x=p[0]),void 0==result.y&&p.length>1&&(result.y=p[1]),result},CC.rotatePoint=function(p,anchor,angle){p=CC.normalizePoint(p),anchor=CC.normalizePoint(anchor);var teta=angle*Math.PI/-180,diffX=p.x-anchor.x,diffY=p.y-anchor.y,cos=Math.cos(teta),sin=Math.sin(teta);return{x:Math.round(cos*diffX-sin*diffY+anchor.x),y:Math.round(sin*diffX+cos*diffY+anchor.y)}},CC.calcDistance=function(p1,p2){p1=CC.normalizePoint(p1),p2=CC.normalizePoint(p2);var xs=0,ys=0;return xs=p2.x-p1.x,xs*=xs,ys=p2.y-p1.y,ys*=ys,Math.sqrt(xs+ys)},CC.calcAngleRadians=function(p1,p2){return p1=CC.normalizePoint(p1),p2=CC.normalizePoint(p2),Math.atan2(p2.y-p1.y,p2.x-p1.x)},CC.calcAngleDegrees=function(p1,p2){return-180*CC.calcAngleRadians(p1,p2)/Math.PI},CC.generalFormEqOfLine=function(p1,p2){var p1=CC.normalizePoint(p1),p2=CC.normalizePoint(p2);return{a:p1.y-p2.y,b:p2.x-p1.x,c:(p1.x-p2.x)*p1.y+(p2.y-p1.y)*p1.x}},CC.calcLineDistance=function(line,p){return p=CC.normalizePoint(p),Math.abs(line.a*p.x+line.b*p.y+line.c)/Math.sqrt(line.a*line.a+line.b*line.b)},CC.calcCenterOfPoints=function(points){var minX=Number.MAX_VALUE,minY=Number.MAX_VALUE,maxX=Number.MIN_VALUE,maxY=Number.MIN_VALUE;for(var i in points){var p=CC.normalizePoint(points[i]);minX=Math.min(minX,p.x),minY=Math.min(minY,p.y),maxX=Math.max(maxX,p.x),maxY=Math.max(maxY,p.y)}return{x:minX+(maxX-minX)/2,y:minY+(maxY-minY)/2}}}(),function(){CC.Promise=function(){this._callbacks=[]},CC.Promise.prototype.then=function(func,context){var p;return this._isdone?p=func.apply(context,this.result):(p=new CC.Promise,this._callbacks.push(function(){var res=func.apply(context,arguments);res&&CC.isFunction(res.then)&&res.then(p.done,p)})),p},CC.Promise.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var i=0;i<this._callbacks.length;i++)this._callbacks[i].apply(null,arguments);this._callbacks=[]},CC.when=function(eventsStr){var p=new CC.Promise,cb=function(){p.done.apply(p,arguments),CC.unbind(eventsStr,cb)};return CC.bind(eventsStr,cb),p},CC.promiseJoin=function(promises){for(var p=new CC.Promise,total=promises.length,numdone=0,results=[],notifier=function(i){return function(){numdone+=1,results[i]=Array.prototype.slice.call(arguments),numdone===total&&p.done.apply(p,results)}},i=0;total>i;i++)promises[i].then(notifier(i));return p},CC.promiseChain=function(funcs,args){var p=new CC.Promise;if(0===funcs.length)p.done.apply(p,args);else{var pi=funcs[0].apply(null,args);pi&&CC.isFunction(pi.then)&&pi.then(function(){funcs.splice(0,1),CC.promiseChain(funcs,arguments).then(function(){p.done.apply(p,arguments)})})}return p}}();var mouseEnvironmentBuilder=function(canvas,screen){var mouseHistory=[],touchHistory={},fingersPositionWhenFingerAmountChange={},currentFingerCount=0,lastClickOrTapTime=0,longPressOrClickTimeout=1e3,longPressTimeout=null,tapOrClickDistance=32,swipeMinSpeed=.5,swipeMinDistance=200,swipeMaxDeviation=100,doubleClickOrTapTime=200;canvas.onselectstart=function(){return!1},canvas.onmousedown=function(event){event.screen=screen,CC.trigger("mousedown",event)},canvas.onmouseup=function(event){event.screen=screen,CC.trigger("mouseup",event)},canvas.onmousemove=function(event){event.screen=screen,CC.trigger("mousemove",event)},canvas.oncontextmenu=function(event){return event.screen=screen,CC.trigger("rightclick",event),!1},canvas.addEventListener("touchstart",function(event){event.preventDefault(),event.screen=screen,CC.trigger("touchstart",event)},!1),canvas.addEventListener("touchend",function(event){event.preventDefault(),event.screen=screen,CC.trigger("touchend",event)},!1),canvas.addEventListener("touchmove",function(event){event.preventDefault(),event.screen=screen,CC.trigger("touchmove",event)},!1),CC.bind("mousedown",function(event){mouseHistory.push({type:"start",x:event.offsetX,y:event.offsetY,when:(new Date).getTime()}),identifyAndTriggerLongClickOrPress(!0,mouseHistory,event)}),CC.bind("mousemove",function(event){mouseHistory.length&&(CC.trigger("mousedrag",event),mouseHistory.push({type:"move",x:event.offsetX,y:event.offsetY,when:(new Date).getTime()}))}),CC.bind("mouseup",function(event){for(var a in mouseHistory)if("move"===mouseHistory[a].type){CC.trigger("mousedragend",event);break}identifyAndTriggerClickOrTap(!0,mouseHistory,event),clearHistory(mouseHistory),clearTimeout(longPressTimeout)}),CC.bind("touchstart",function(event){for(var touches=event.changedTouches,i=0;i<touches.length;i++){currentFingerCount++;var touch=touches[i];touchHistory[touch.identifier]||(touchHistory[touch.identifier]=[]),touchHistory[touch.identifier].push({type:"start",x:touch.pageX,y:touch.pageY,when:(new Date).getTime()}),fingersPositionWhenFingerAmountChange={};for(var i in touchHistory)fingersPositionWhenFingerAmountChange[i]=touchHistory[i][touchHistory[i].length-1]}touches.length||identifyAndTriggerLongClickOrPress(!1,touchHistory[touches[0].identifier],event)}),CC.bind("touchmove",function(event){for(var touches=event.changedTouches,i=0;i<touches.length;i++){var touch=touches[i];touchHistory[touch.identifier]&&touchHistory[touch.identifier].length&&touchHistory[touch.identifier].push({type:"move",x:touch.pageX,y:touch.pageY,when:(new Date).getTime()})}}),CC.bind("touchend",function(event){var touches=event.changedTouches;if(touches.length)for(var i=0;i<touches.length;i++){currentFingerCount--;var touch=touches[i];0==currentFingerCount&&identifyAndTriggerClickOrTap(!1,touchHistory[touch.identifier],event),clearHistory(touchHistory[touch.identifier]),delete touchHistory[touch.identifier],clearTimeout(longPressTimeout),fingersPositionWhenFingerAmountChange={};for(var i in touchHistory)fingersPositionWhenFingerAmountChange[i]=touchHistory[i][touchHistory[i].length-1]}}),CC.identifyMouseSwipe=function(){return identifySwipe(!0,mouseHistory)},CC.identifyTouchSwipe=function(){var uniqueItem=null;for(var a in touchHistory){if(uniqueItem){uniqueItem=null;break}uniqueItem=a}return uniqueItem?identifySwipe(!1,uniqueItem):null},CC.identifyTouchPinchOrSpread=function(){if(2>currentFingerCount)return null;var actualPositions={};for(var i in touchHistory)actualPositions[i]=touchHistory[i][touchHistory[i].length-1];var actualDistanceSum=distanceSum(actualPositions),firstDistanceSum=distanceSum(fingersPositionWhenFingerAmountChange),distance=actualDistanceSum-firstDistanceSum;return{history:touchHistory,distance:distance,fingerCount:currentFingerCount}},CC.identifyTouchPanOffset=function(){if(2>currentFingerCount)return null;var actualPositions={};for(var i in touchHistory)actualPositions[i]=touchHistory[i][touchHistory[i].length-1];var actualCenter=CC.calcCenterOfPoints(actualPositions),firstCenter=CC.calcCenterOfPoints(fingersPositionWhenFingerAmountChange);return{x:actualCenter.x-firstCenter.x,y:actualCenter.y-firstCenter.y,fingerCount:currentFingerCount}},CC.identifyTouchRotate=function(){if(2>currentFingerCount)return null;var actualPositions={};for(var i in touchHistory)actualPositions[i]=touchHistory[i][touchHistory[i].length-1];var actualCenter=CC.calcCenterOfPoints(actualPositions),firstCenter=CC.calcCenterOfPoints(fingersPositionWhenFingerAmountChange),angles=[];for(var i in fingersPositionWhenFingerAmountChange){var actualAngle=360+CC.calcAngleDegrees(actualPositions[i],actualCenter),firstAngle=360+CC.calcAngleDegrees(fingersPositionWhenFingerAmountChange[i],firstCenter),angleOffset=(actualAngle-firstAngle)%360;angles.push(angleOffset)}angles=angles.sort(function(a,b){return b-a});var angle=angles[Math.floor(angles.length/2)];return{angle:angle,fingerCount:currentFingerCount}};var identifySwipe=function(isMouse,history){if(history.length<2)return null;var p1=history[0],p2=history[history.length-1],distance=CC.calcDistance(p1,p2);if(swipeMinDistance>distance)return null;var speed=distance/(p2.when-p1.when);if(swipeMinSpeed>speed)return null;for(var line=CC.generalFormEqOfLine(p1,p2),i=1;i<history.length-1;i++){var deviation=CC.calcLineDistance(line,history[i]);if(deviation>swipeMaxDeviation)return null}var angle=CC.calcAngleDegrees(p1,p2),direction=null;return angle>-20&&20>angle?direction="left":angle>70&&110>angle?direction="down":angle>160||-160>angle?direction="right":angle>-110&&-70>angle&&(direction="up"),{history:history,isMouse:isMouse,distance:distance,speed:speed,line:line,angle:angle,direction:direction}},identifyAndTriggerClickOrTap=function(isMouse,history,event){if(!history.length||"startafterlong"!==history[0].type){var distance=longestDistance(history);if(!(distance>tapOrClickDistance)){var eventName="tap";isMouse&&(eventName="click");var time=(new Date).getTime();doubleClickOrTapTime>time-lastClickOrTapTime?eventName="double"+eventName:lastClickOrTapTime=time,isMouse||(event.fingerCount=currentFingerCount),CC.trigger(eventName,event)}}},identifyAndTriggerLongClickOrPress=function(isMouse,history,event){longPressTimeout=setTimeout(function(){if(history.length){var distance=longestDistance(history);if(tapOrClickDistance>=distance){var eventName="longpress";isMouse&&(eventName="longclick"),isMouse||(event.fingerCount=currentFingerCount),CC.trigger(eventName,event),clearHistory(history),history.push({type:"startafterlong",x:event.offsetX,y:event.offsetY,when:(new Date).getTime()})}}},longPressOrClickTimeout)},longestDistance=function(history){var result=0;if(history.length>1)for(var i=1;i<history.length;i++)result=Math.max(result,CC.calcDistance(history[0],history[i]));return result},distanceSum=function(fingers){var distanceSum=0;for(var i in fingers){var passedI=!1;for(var j in fingers)passedI&&(distanceSum+=CC.calcDistance(fingers[i],fingers[j])),i===j&&(passedI=!0)}return distanceSum},clearHistory=function(history){for(;history.length;)history.pop()},elclickbinder=function(eventname,nickname){CC.bind(eventname,function(event){var pos=getEventScreenPosition(event);if(pos){var clicked=CC.findFirstClickableElementInArea(pos.x,pos.y);clicked&&clicked.trigger&&(nickname||(nickname=eventname),clicked.trigger(nickname,event))}})};elclickbinder("click"),elclickbinder("doubleclick"),elclickbinder("longclick"),elclickbinder("rightclick"),elclickbinder("tap"),elclickbinder("doubletap"),elclickbinder("longpress"),elclickbinder("mousemove","mousemoveover"),elclickbinder("mousedrag","mousedragover"),elclickbinder("touchmove","touchmoveover");var getEventScreenPosition=function(event){if(!event.screen||event.screen.htmlId!=screen.htmlId)return{x:0,y:0};var resp={};return resp.x=event.offsetX,event.screen.x&&(resp.x+=event.screen.x),resp.y=event.offsetY,event.screen.y&&(resp.y+=event.screen.y),resp};CC.findFirstClickableElementInArea=function(x,y){var list=CC.areaSearch({x:x,y:y,w:0,h:0});if(!list||!list.length)return null;var sorted=list.sort(["zIndex","ASC"],["getCreationOrder","DESC"]),result=null;return sorted.each(function(){return this.clickable?(result=this,!1):void 0}),result}};!function(){var keyPressed={},keyMapping={8:"BACKSPACE",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPSLOCK",27:"ESC",33:"PGUP",34:"PGDOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",44:"PRINTSCREEN",45:"INSERT",46:"DEL",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"WIN",93:"RIGHTCMD",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"},keyAlias={CMD:"WIN",OPTION:"ALT"};window.addEventListener("keyup",function(event){delete keyPressed[keyMapping[event.keyCode]],CC.trigger("keyup",event)},!1),window.addEventListener("keydown",function(event){keyPressed[keyMapping[event.keyCode]]=!0,CC.trigger("keydown",event)},!1),CC.isNoKeyPressed=function(){for(var j in keyPressed)return!1;return!0},CC.isKeysPressed=function(keys){var keysArr=keys.toUpperCase().replace(/ /g,"").split("+");for(var i in keysArr){var k=keysArr[i].toUpperCase();if(keyAlias[k]&&(k=keyAlias[k]),!keyPressed[k])return!1}return!0},CC.isKeysPressedOnly=function(keys){var keysArr=keys.toUpperCase().replace(/ /g,"").split("+"),map={};for(var i in keysArr){var k=keysArr[i].toUpperCase();if(keyAlias[k]&&(k=keyAlias[k]),!keyPressed[k])return!1;map[k]=!0}for(var j in keyPressed)if(!map[j])return!1;return!0},CC.onKeysDown=function(keys,action){return CC.bind("keydown",function(event){if(CC.isKeysPressed(keys)){var wantedArr=keys.toUpperCase().replace(/ /g,"").split("+");for(var i in wantedArr){var k=wantedArr[i].toUpperCase();if(keyAlias[k]&&(k=keyAlias[k]),k==keyMapping[event.keyCode]){action(event);break}}}})},CC.onKeysDownOnly=function(keys,action){return CC.bind("keydown",function(event){CC.isKeysPressedOnly(keys)&&action(event)})},CC.onKeysUpOnly=function(keys,action){return CC.bind("keyup",function(event){var wantedArr=keys.toUpperCase().replace(/ /g,"").split("+"),wantedMap={};for(var i in wantedArr){var k=wantedArr[i].toUpperCase();if(keyAlias[k]&&(k=keyAlias[k]),!keyPressed[k]&&k!=keyMapping[event.keyCode])return;wantedMap[k]=!0}if(wantedMap[keyMapping[event.keyCode]]){for(var j in keyPressed)if(!wantedMap[j])return;action(event)}})},CC.onKeysSequence=function(keys,maxdelay,action){var step=0,wantedKeys=[];for(var i in keys){var k=keys[i].toUpperCase();keyAlias[k]&&(k=keyAlias[k]),wantedKeys.push(k)}var timeout;return CC.bind("keydown",function(event){clearTimeout(timeout),wantedKeys[step]===keyMapping[event.keyCode]?step++:step=0,step==wantedKeys.length&&(step=0,action()),timeout=setTimeout(function(){step=0},maxdelay)})}}(),function(){CC.ajaxTimeout=0;var _encode=function(data){var result="";if("string"==typeof data)result=data;else{var e=encodeURIComponent;for(var k in data)data.hasOwnProperty(k)&&(result+="&"+e(k)+"="+e(data[k]))}return result},new_xhr=function(){var xhr;if(window.XMLHttpRequest)xhr=new XMLHttpRequest;else if(window.ActiveXObject)try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP")}return xhr};CC.ajax=function(method,url,data,headers){var xhr,payload,p=new CC.Promise;data=data||{},headers=headers||{};try{xhr=new_xhr()}catch(e){return p.done(!1,"no xhr"),p}payload=_encode(data),"GET"===method&&payload&&(url+="?"+payload,payload=null),xhr.open(method,url),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var h in headers)headers.hasOwnProperty(h)&&xhr.setRequestHeader(h,headers[h]);var onTimeout=function(){xhr.abort(),p.done(!1,"timeout",xhr)},timeout=CC.ajaxTimeout;if(timeout)var tid=setTimeout(onTimeout,timeout);return xhr.onreadystatechange=function(){if(timeout&&clearTimeout(tid),4===xhr.readyState){var success=xhr.status>=200&&xhr.status<300||304===xhr.status;p.done(success,xhr.responseText,xhr)}},xhr.send(payload),p}}(),function(){var sprites={};CC.loadResources=function(srcs){var p=new CC.Promise,loadRecursively=function(index){var img=new Image;img.crossOrigin="Anonymous",img.src=srcs[index],img.onload=function(){sprites[srcs[index]]=this,index<srcs.length-1?loadRecursively(index+1):p.done()}};return loadRecursively(0),p},CC.useResource=function(src){return sprites[src]}}(),function(){CC.Color=function(arg){var self=this,init=function(){if(CC.isString(arg))self.str=arg,self.rgba=strToColor(self.str),self.cmyka=rgbaToCmyka(self.rgba);else{if(!(CC.isArray(arg)&&arg.length<=5))return self.valid=!1,void 0;3==arg.length?(self.rgba=[arg[0],arg[1],arg[2],1],self.cmyka=rgbaToCmyka(self.rgba)):4==arg.length?(self.rgba=[arg[0],arg[1],arg[2],arg[3]],self.cmyka=rgbaToCmyka(self.rgba)):(self.cmyka=[arg[0],arg[1],arg[2],arg[3],arg[4]],self.rgba=cmykaToRgba(self.cmyka)),self.str=rgbaToStr(self.rgba)}self.valid=!0,self.R=self.rgba[0],self.G=self.rgba[1],self.B=self.rgba[2],self.A=self.rgba[3],self.C=self.cmyka[0],self.M=self.cmyka[1],self.Y=self.cmyka[2],self.K=self.cmyka[3]},strToColor=function(str){var rgbaRegex=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/;if(str.indexOf("rgb")>-1){var values=rgbaRegex.exec(str);return[Math.round(parseFloat(values[1])),Math.round(parseFloat(values[2])),Math.round(parseFloat(values[3])),Math.round(parseFloat(values[4]||"1"))]}if(CC.screens[0]&&CC.screens[0].context){var ctx=CC.screens[0].context;ctx.fillStyle=str,ctx.fillRect(0,0,1,1);var rgba=ctx.getImageData(0,0,1,1).data;return[rgba[0],rgba[1],rgba[2],rgba[3]/255]}var tempDiv=document.createElement("div");tempDiv.style.color=str,document.body.appendChild(tempDiv);var rgbStr=getComputedStyle(tempDiv).color;document.body.removeChild(tempDiv);var values=rgbaRegex.exec(rgbStr);return[Math.round(parseFloat(values[1])),Math.round(parseFloat(values[2])),Math.round(parseFloat(values[3])),1]},rgbaToCmyka=function(rgba){if(0===rgba[0]&&0===rgba[1]&&0===rgba[2])return[0,0,0,1,1];var c=1-rgba[0]/255,m=1-rgba[1]/255,y=1-rgba[2]/255,k=Math.min(c,m,y);return c=(c-k)/(1-k),m=(m-k)/(1-k),y=(y-k)/(1-k),[c,m,y,k,rgba[3]]},cmykaToRgba=function(cmyka){var R=cmyka[0]*(1-cmyka[3])+cmyka[3],G=cmyka[1]*(1-cmyka[3])+cmyka[3],B=cmyka[2]*(1-cmyka[3])+cmyka[3];return R=Math.round(255*(1-R)+.5),G=Math.round(255*(1-G)+.5),B=Math.round(255*(1-B)+.5),[R,G,B,cmyka[4]]},rgbaToStr=function(rgba){return"rgba("+rgba[0]+", "+rgba[1]+", "+rgba[2]+", "+rgba[3]+")"};this.mixWith=function(other,pct){CC.isNumber(pct)||(pct=50);var dif=100-pct;return new CC.Color([(this.C*dif+other.C*pct)/100,(this.M*dif+other.M*pct)/100,(this.Y*dif+other.Y*pct)/100,(this.K*dif+other.K*pct)/100,(this.A*dif+other.A*pct)/100])},init()}}(),function(){CC.screens=[],CC.tiles={},CC.step=0,CC.draw=function(){for(var i in CC.screens){var scr=CC.screens[i];scr.context.clearRect(0,0,scr.w,scr.h),CC.areaSearch({x:scr.x,y:scr.y,w:scr.w,h:scr.h,includeFixedOnScreen:scr.htmlId}).sort(["zIndex","DESC"],["getCreationOrder","ASC"]).each(function(){drawElement(this,scr)})}CC.step++},CC.loadScreens=function(){if(CC.screens&&CC.screens.length)for(var i in CC.screens){var s=CC.screens[i];if(s.htmlId){var canvas=document.getElementById(s.htmlId);canvas&&canvas.getContext?(mouseEnvironmentBuilder(canvas,s),s.context||(s.context=canvas.getContext("2d")),void 0===s.x&&(s.x=0),void 0===s.y&&(s.y=0),void 0===s.w&&(s.w=canvas.offsetWidth),void 0===s.h&&(s.h=canvas.offsetHeight),s.setCenter||(s.setCenter=setCenter)):CC.screens.splice(i,1)}else CC.screens.splice(i,1)}else{var canvas=document.getElementById("CascadeCanvas");if(canvas&&canvas.getContext){var s={htmlId:"CascadeCanvas",context:canvas.getContext("2d"),x:0,y:0,w:canvas.offsetWidth,h:canvas.offsetHeight,setCenter:setCenter};mouseEnvironmentBuilder(canvas,s),CC.screens=[s]}}};var setCenter=function(x,y){var fx=x-this.w/2,fy=y-this.h/2;CC.isNumber(this.maxX)&&(fx=Math.min(fx,this.maxX)),CC.isNumber(this.maxY)&&(fy=Math.min(fy,this.maxY)),CC.isNumber(this.minX)&&(fx=Math.max(fx,this.minX)),CC.isNumber(this.minY)&&(fy=Math.max(fy,this.minY)),this.x=fx,this.y=fy},drawElement=function(el,scr){if(el.hidden!==!0){var layers=CC.sort(el.layers,["zIndex","DESC"]);for(var s in layers){var layr=layers[s];CC.isFunction(layr)?layr.call(el,scr):drawLayer(el,layr,scr)}}},drawLayer=function(el,layr,scr){if(layr&&layr.hidden!==!0){var config=configDrawing(el,layr,scr);scr.context.save(),el.fixedOnScreen!==!0&&el.fixedOnScreen!==scr.htmlId&&scr.context.translate(-scr.x,-scr.y),scr.context.translate(el.x,el.y),setElementRotation(el,config,scr),setLayerRotation(el,layr,config,scr),setLayerOffset(config,scr),setElementFlip(el,config,scr),setLayerFlip(layr,config,scr),setLayerScale(layr,config,scr),setLayerAlpha(layr,scr),setLayerBlendMode(layr,scr),setLayerShadow(layr,scr),setLayerFill(layr,config,scr),setLayerStroke(layr,config,scr),setLayerSpriteOrTile(layr,config,scr),layr.shadow&&(clearShadow(scr),setLayerFill(layr,config,scr),setLayerStroke(layr,config,scr),setLayerSpriteOrTile(layr,config,scr)),scr.context.restore()}},configDrawing=function(el,layr,scr){var config={};if(config.EW=el.w,config.EH=el.h,scr&&"text"===layr.shape&&CC.isString(layr.text)&&(config.font=createFont(layr,scr)),!el.w||!el.h)if(CC.isArray(layr.shape)){config.EW=el.w||0,config.EH=el.h||0;for(var i in layr.shape)config.EW=Math.max(config.EW,layr.shape[i][0]),config.EH=Math.max(config.EH,layr.shape[i][1])}else if("text"===layr.shape&&CC.isString(layr.text)){var measuredW=50;scr&&(scr.context.font=config.font,measuredW=scr.context.measureText(layr.text).width),config.EH=el.h||1.5*layr.font.size,config.EW=el.w||measuredW}return config.offsetX=layr.offsetX||0,config.offsetY=layr.offsetY||0,config.FW=layr.w||config.EW,config.FH=layr.h||config.EH,"circle"===layr.shape&&(config.FH=config.FW),config},setElementRotation=function(el,config,scr){el.angle&&(el.anchor||(el.anchor={x:config.EW/2,y:config.EH/2}),scr.context.translate(el.anchor.x,el.anchor.y),scr.context.rotate(el.angle*Math.PI/-180),scr.context.translate(-el.anchor.x,-el.anchor.y))},setLayerRotation=function(el,layr,config,scr){layr.angle&&(layr.anchor||(layr.anchor=el.anchor||{x:config.EW/2,y:config.EH/2}),scr.context.translate(layr.anchor.x,layr.anchor.y),scr.context.rotate(layr.angle*Math.PI/-180),scr.context.translate(-layr.anchor.x,-layr.anchor.y))},setLayerOffset=function(config,scr){scr.context.translate(config.offsetX,config.offsetY)},setElementFlip=function(el,config,scr){if(el.flip&&el.flip.length){var scaleHor=-1!=el.flip.indexOf("x")?-1:1,scaleVer=-1!=el.flip.indexOf("y")?-1:1;scr.context.translate(config.FW/2,config.FH/2),scr.context.scale(scaleHor,scaleVer),scr.context.translate(-config.FW/2,-config.FH/2)}},setLayerFlip=function(layr,config,scr){if(layr.flip&&layr.flip.length){var scaleHor=-1!=layr.flip.indexOf("x")?-1:1,scaleVer=-1!=layr.flip.indexOf("y")?-1:1;scr.context.translate(config.FW/2,config.FH/2),scr.context.scale(scaleHor,scaleVer),scr.context.translate(-config.FW/2,-config.FH/2)}},setLayerScale=function(layr,config,scr){layr.scale&&(CC.isNumber(layr.scale.x)||CC.isNumber(layr.scale.y))&&(scr.context.translate(config.FW/2,config.FH/2),scr.context.scale(CC.isNumber(layr.scale.x)?layr.scale.x:1,CC.isNumber(layr.scale.y)?layr.scale.y:1),scr.context.translate(-config.FW/2,-config.FH/2))},setLayerAlpha=function(layr,scr){scr.context.globalAlpha=void 0!=layr.alpha&&layr.alpha<1?layr.alpha:1},setLayerBlendMode=function(layr,scr){scr.context.globalCompositeOperation=layr.blendMode?layr.blendMode:null},setLayerShadow=function(layr,scr){layr.shadow&&(layr.shadow.blur&&(scr.context.shadowBlur=layr.shadow.blur),layr.shadow.color&&(scr.context.shadowColor=layr.shadow.color),layr.shadow.x&&(scr.context.shadowOffsetX=layr.shadow.x),layr.shadow.y&&(scr.context.shadowOffsetY=layr.shadow.y))},clearShadow=function(scr){scr.context.shadowColor=0,scr.context.shadowOffsetX=0,scr.context.shadowOffsetY=0,scr.context.shadowBlur=0},setLayerFill=function(layr,config,scr){layr.fill&&(layr.fill.color||layr.fill.linearGradient||layr.fill.radialGradient)&&(setLayerFillStyle(layr,config,scr),"rect"===layr.shape||void 0===layr.shape?layr.roundedBorderRadius?(createRoundedBorder(config.FW,config.FH,layr.roundedBorderRadius,scr),scr.context.fill()):scr.context.fillRect(0,0,config.FW,config.FH):"circle"===layr.shape?(createCircle(config,scr),scr.context.fill()):"text"===layr.shape&&CC.isString(layr.text)&&layr.text.length?(scr.context.font=config.font,scr.context.textBaseline=layr.font.baseline,drawText(layr,config,scr,function(line,x,y){scr.context.fillText(line,x,y)})):CC.isArray(layr.shape)&&(createPolygon(layr,scr),scr.context.fill()))},setLayerStroke=function(layr,config,scr){layr.stroke&&(layr.stroke.color||layr.stroke.linearGradient||layr.stroke.radialGradient||void 0!==layr.stroke.thickness||layr.stroke.cap||layr.stroke.join||layr.stroke.dash)&&(setLayerStrokeStyle(layr,config,scr),"rect"===layr.shape||void 0===layr.shape?layr.roundedBorderRadius?(createRoundedBorder(config.FW,config.FH,layr.roundedBorderRadius,scr),scr.context.stroke()):scr.context.strokeRect(0,0,config.FW,config.FH):"circle"===layr.shape?(createCircle(config,scr),scr.context.stroke()):"text"===layr.shape&&CC.isString(layr.text)&&layr.text.length?(scr.context.font=config.font,scr.context.textBaseline=layr.font.baseline,drawText(layr,config,scr,function(line,x,y){scr.context.strokeText(line,x,y)})):CC.isArray(layr.shape)&&(createPolygon(layr,scr),scr.context.stroke()))},setLayerSpriteOrTile=function(layr,config,scr){layr.sprite&&layr.sprite.url?setLayerSprite(layr,config,scr):layr.tiles&&setLayerTiles(layr,config,scr)},setLayerFillStyle=function(layr,config,scr){layr.fill.color&&CC.isString(layr.fill.color)?scr.context.fillStyle=layr.fill.color:layr.fill.linearGradient?scr.context.fillStyle=createLinearGradient(layr.fill.linearGradient,config.FW,config.FH,scr):layr.fill.radialGradient&&(scr.context.fillStyle=createRadialGradient(layr.fill.radialGradient,config.FW,config.FH,scr))
},setLayerStrokeStyle=function(layr,config,scr){if(layr.stroke.color&&CC.isString(layr.stroke.color)?scr.context.strokeStyle=layr.stroke.color:layr.stroke.linearGradient?scr.context.strokeStyle=createLinearGradient(layr.stroke.linearGradient,config.FW,config.FH,scr):layr.stroke.radialGradient&&(scr.context.strokeStyle=createRadialGradient(layr.stroke.radialGradient,config.FW,config.FH,scr)),layr.stroke.thickness&&(scr.context.lineWidth=layr.stroke.thickness),layr.stroke.cap&&(scr.context.lineCap=layr.stroke.cap),layr.stroke.join&&(scr.context.lineJoin=layr.stroke.join),layr.stroke.dash){var arr;arr=CC.isArray(layr.stroke.dash)?layr.stroke.dash:[layr.stroke.dash],void 0!==scr.context.setLineDash?scr.context.setLineDash(arr):void 0!==scr.context.mozDash&&(scr.context.mozDash=arr)}},setLayerSprite=function(layr,config,scr){limitSprite(layr,config,scr);var sprite=createSprite(layr.sprite,config.FW,config.FH);if(sprite.w&&sprite.h){var startX=0,startY=0,repeatX=layr.sprite.repeat&&-1!=layr.sprite.repeat.indexOf("x"),repeatY=layr.sprite.repeat&&-1!=layr.sprite.repeat.indexOf("y");do{startY=0;do scr.context.drawImage(sprite.res,sprite.x,sprite.y,sprite.w,sprite.h,startX,startY,sprite.w,sprite.h),repeatY&&(startY+=sprite.h);while(startY<config.EH&&repeatY);repeatX&&(startX+=sprite.w)}while(startX<config.EW&&repeatX)}},setLayerTiles=function(layr,config,scr){limitSprite(layr,config,scr);var tileSize=layr.tileSize||{},tw=tileSize.w||16,th=tileSize.h||16,startY=0;for(var y in layr.tiles){var startX=0;for(var x in layr.tiles[y]){var tile=CC.tiles[layr.tiles[y][x]];tile.w=tw,tile.h=th;var sprite=createSprite(tile,config.FW,config.FH);sprite.w&&sprite.h&&scr.context.drawImage(sprite.res,sprite.x,sprite.y,sprite.w,sprite.h,startX,startY,sprite.w,sprite.h),startX+=tw}startY+=th}},createCircle=function(config,scr){scr.context.beginPath(),scr.context.arc(config.FW/2,config.FW/2,config.FW/2,0,2*Math.PI),scr.context.closePath()},createPolygon=function(layr,scr){if(CC.isArray(layr.shape[0])&&CC.isNumber(layr.shape[0][0])&&CC.isNumber(layr.shape[0][1])){scr.context.beginPath(),scr.context.moveTo(layr.shape[0][0],layr.shape[0][1]);for(var p in layr.shape){var point=layr.shape[p];scr.context.lineTo(point[0],point[1])}scr.context.closePath()}},createLinearGradient=function(linearGradient,FW,FH,scr){linearGradient.start||(linearGradient.start=[0,0]),linearGradient.end||(linearGradient.end=[100,0]);var x1=linearGradient.start[0]/100*FW,y1=linearGradient.start[1]/100*FH,x2=linearGradient.end[0]/100*FW,y2=linearGradient.end[1]/100*FH,gradient=scr.context.createLinearGradient(x1,y1,x2,y2);for(var s in linearGradient){var stop=parseFloat(s);CC.isNumber(stop)&&gradient.addColorStop(stop,linearGradient[s])}return gradient},createRadialGradient=function(radialGradient,FW,FH,scr){radialGradient.innerCircle||(radialGradient.innerCircle={}),void 0===radialGradient.innerCircle.centerX&&(radialGradient.innerCircle.centerX=50),void 0===radialGradient.innerCircle.centerY&&(radialGradient.innerCircle.centerY=50),void 0===radialGradient.innerCircle.radius&&(radialGradient.innerCircle.radius=0),radialGradient.outerCircle||(radialGradient.outerCircle={}),void 0===radialGradient.outerCircle.centerX&&(radialGradient.outerCircle.centerX=50),void 0===radialGradient.outerCircle.centerY&&(radialGradient.outerCircle.centerY=50),void 0===radialGradient.outerCircle.radius&&(radialGradient.outerCircle.radius=100);var maxDim=Math.max(FW,FH),x1=radialGradient.innerCircle.centerX/100*FW,y1=radialGradient.innerCircle.centerY/100*FH,r1=radialGradient.innerCircle.radius/100*maxDim,x2=radialGradient.outerCircle.centerX/100*FW,y2=radialGradient.outerCircle.centerY/100*FH,r2=radialGradient.outerCircle.radius/100*maxDim,gradient=scr.context.createRadialGradient(x1,y1,r1,x2,y2,r2);for(var s in radialGradient){var stop=parseFloat(s);!isNaN(stop)&&isFinite(stop)&&gradient.addColorStop(stop,radialGradient[s])}return gradient},createFont=function(layr){layr.font||(layr.font={});var b=" ",px="px";return layr.font.style=layr.font.style||"",layr.font.weight=layr.font.weight||"",layr.font.size=layr.font.size||10,layr.font.family=layr.font.family||"sans-serif",layr.font.baseline=layr.font.baseline||"top",layr.font.style+b+layr.font.weight+b+layr.font.size+px+b+layr.font.family},createRoundedBorder=function(FW,FH,radius,scr){scr.context.beginPath(),scr.context.moveTo(radius,0),scr.context.arcTo(FW,0,FW,FH,radius),scr.context.arcTo(FW,FH,0,FH,radius),scr.context.arcTo(0,FH,0,0,radius),scr.context.arcTo(0,0,FW,0,radius),scr.context.closePath()},limitSprite=function(layr,config,scr){if("rect"===layr.shape||void 0===layr.shape)layr.roundedBorderRadius?createRoundedBorder(config.FW,config.FH,layr.roundedBorderRadius,scr):(scr.context.beginPath(),scr.context.moveTo(0,0),scr.context.lineTo(config.FW,0),scr.context.lineTo(config.FW,config.FH),scr.context.lineTo(0,config.FH),scr.context.closePath()),scr.context.clip();else if("circle"===layr.shape)createCircle(config,scr),scr.context.clip();else if("text"===layr.shape&&CC.isString(layr.text)&&layr.text.length){scr.context.font=config.font,scr.context.textBaseline=layr.font.baseline;var pathText=scr.context.pathText||scr.context.webkitPathText||scr.context.mozPathText||scr.context.oPathText||scr.context.msPathText||null;null!==pathText&&(drawText(layr,config,scr,function(line,x,y){pathText(line,x,y)}),scr.context.clip())}else CC.isArray(layr.shape)&&(createPolygon(layr,scr),scr.context.clip())},createSprite=function(sprite,FW,FH){var response={res:CC.useResource(sprite.url),x:sprite.x||0,y:sprite.y||0};if(response.res){response.w=sprite.w||Math.min(FW,response.res.width),response.h=sprite.h||Math.min(FH,response.res.height);var delay=sprite.delay||1;sprite.frames&&sprite.frames>1&&(sprite.vertical?response.y+=parseInt(CC.step/delay)%sprite.frames*response.h:response.x+=parseInt(CC.step/delay)%sprite.frames*response.w)}else response.w=0,response.h=0;return response},drawText=function(layr,config,scr,drawMethod){for(var lineHeight=config.font.lineHeight||layr.font.size,prelines=layr.text.split("\n"),y=0,i=0;i<prelines.length;i++){for(var words=prelines[i].split(" "),line="",n=0;n<words.length;n++){var testLine=line+words[n]+" ",metrics=scr.context.measureText(testLine),testWidth=metrics.width;testWidth>config.FW&&n>0?(drawMethod(line,0,y),line=words[n]+" ",y+=lineHeight):line=testLine}drawMethod(line,0,y),y+=lineHeight}};CC.transformLayer=function(element,opt,percentage){var config=configDrawing(element,opt.origin);opt.target.zIndex=transformNumber(opt.origin.zIndex,opt.destination.zIndex,percentage,0),transformShapeWidthHeightAndRoundedB(opt.target,opt.origin,opt.destination,percentage,config),opt.target.text=transformNoTween(opt.origin.text,opt.destination.text,percentage),opt.target.blendMode=transformNoTween(opt.origin.blendMode,opt.destination.blendMode,percentage),transformFont(opt.target,opt.origin,opt.destination,percentage,config),opt.target.offsetX=transformNumber(opt.origin.offsetX,opt.destination.offsetX,percentage,0),opt.target.offsetY=transformNumber(opt.origin.offsetY,opt.destination.offsetY,percentage,0),opt.target.angle=transformNumber(opt.origin.angle,opt.destination.angle,percentage,0),transformAnchor(opt.target,opt.origin,opt.destination,percentage,config,element),transformFlipAndScale(opt.target,opt.origin,opt.destination,percentage,config),opt.target.alpha=transformNumber(opt.origin.alpha,opt.destination.alpha,percentage,1),transformShadow(opt.target,opt.origin,opt.destination,percentage,config),transformFill(opt.target,opt.origin,opt.destination,percentage,config),transformStroke(opt.target,opt.origin,opt.destination,percentage,config),transformSprite(opt.target,opt.origin,opt.destination,percentage,config),transformTiles(opt.target,opt.origin,opt.destination,percentage,config)};var pctCalc=function(originVal,destVal,pct){var diff=destVal-originVal;return diff?originVal+diff/100*pct:originVal},transformNumber=function(originVal,destVal,pct,defaultV){if(originVal===destVal)return originVal;var originVal=CC.isNumber(originVal)?originVal:defaultV,destVal=CC.isNumber(destVal)?destVal:defaultV;return pctCalc(originVal,destVal,pct)},transformColor=function(originVal,destVal,pct,defaultV){if(originVal===destVal)return originVal;var defaultVC=new CC.Color(defaultV),originValC=new CC.Color(originVal),destValC=new CC.Color(destVal);return defaultVC.valid||(defaultVC=originValC.valid?new CC.Color([originValC.C,originValC.M,originValC.Y,originValC.K,0]):destValC.valid?new CC.Color([destValC.C,destValC.M,destValC.Y,destValC.K,0]):new CC.Color([0,0,0,0,0])),originValC.valid||(originValC=defaultVC),destValC.valid||(destValC=defaultVC),originValC.mixWith(destValC,pct).str},transformNoTween=function(originVal,destVal,pct){return originVal==destVal?originVal:50>pct?originVal:destVal},createSolidGradient=function(color,gradient){var resp={};for(var g in gradient)resp[g]="start"===g||"end"===g||"innerCircle"===g||"outerCircle"===g?gradient[g]:color;return resp},transformLinearGradient=function(olinearg,dlinearg,percentage){if(olinearg||dlinearg){var olinearg=olinearg||{},dlinearg=dlinearg||{},linearGradient={};if(olinearg.start||dlinearg.start){var ostart=olinearg.start||[],dstart=dlinearg.start||[];linearGradient.start=[transformNumber(ostart[0],dstart[0],percentage,0),transformNumber(ostart[1],dstart[1],percentage,0)]}if(olinearg.end||dlinearg.end){var oend=olinearg.end||[],dend=dlinearg.end||[];linearGradient.end=[transformNumber(oend[0],dend[0],percentage,100),transformNumber(oend[1],dend[1],percentage,0)]}for(var ol in olinearg)"start"!==ol&&"end"!==ol&&(dlinearg[ol]?linearGradient[ol]=transformColor(olinearg[ol],dlinearg[ol],percentage,"black"):50>percentage&&(linearGradient[ol]=olinearg[ol]));for(var dl in dlinearg)"start"!==dl&&"end"!==dl&&!olinearg[dl]&&percentage>=50&&(linearGradient[dl]=dlinearg[dl]);return linearGradient}},transformRadialGradient=function(oradg,dradg,percentage){if(oradg||dradg){var oradg=oradg||{},dradg=dradg||{},radialGradient={};if(oradg.innerCircle||dradg.innerCircle){var oinner=oradg.innerCircle||{},dinner=dradg.innerCircle||{};radialGradient.innerCircle={centerX:transformNumber(oinner.centerX,dinner.centerX,percentage,50),centerY:transformNumber(oinner.centerY,dinner.centerY,percentage,50),radius:transformNumber(oinner.radius,dinner.radius,percentage,0)}}if(oradg.outerCircle||dradg.outerCircle){var oouter=oradg.outerCircle||{},douter=dradg.outerCircle||{};radialGradient.outerCircle={centerX:transformNumber(oouter.centerX,douter.centerX,percentage,50),centerY:transformNumber(oouter.centerY,douter.centerY,percentage,50),radius:transformNumber(oouter.radius,douter.radius,percentage,100)}}for(var ol in oradg)"innerCircle"!==ol&&"outerCircle"!==ol&&(dradg[ol]?radialGradient[ol]=transformColor(oradg[ol],dradg[ol],percentage,"black"):50>percentage&&(radialGradient[ol]=oradg[ol]));for(var dl in dradg)"innerCircle"!==dl&&"outerCircle"!==dl&&!oradg[dl]&&percentage>=50&&(radialGradient[dl]=dradg[dl]);return radialGradient}},transformShapeWidthHeightAndRoundedB=function(target,origin,destination,percentage,config){target.w=transformNumber(origin.w,destination.w,percentage,config.FW),target.h=transformNumber(origin.h,destination.h,percentage,config.FH);var oshape=CC.isString(origin.shape)?origin.shape:"rect",dshape=CC.isString(destination.shape)?destination.shape:"rect";if(oshape!==dshape)if("rect"===oshape&&"circle"===dshape){target.h=transformNumber(origin.h,destination.w,percentage,config.FH);var oroundedBorderRadius=CC.isNumber(origin.roundedBorderRadius)?origin.roundedBorderRadius:0,droundedBorderRadius=Math.min(target.w,target.h)/2;target.shape="rect",target.roundedBorderRadius=pctCalc(oroundedBorderRadius,droundedBorderRadius,percentage)}else if("circle"===oshape&&"rect"===dshape){var droundedBorderRadius=CC.isNumber(destination.roundedBorderRadius)?destination.roundedBorderRadius:0,oroundedBorderRadius=target.w/2;target.shape="rect",target.roundedBorderRadius=pctCalc(oroundedBorderRadius,droundedBorderRadius,percentage)}else target.shape=50>percentage?origin.shape:destination.shape;else target.shape=origin.shape,target.roundedBorderRadius=transformNumber(origin.roundedBorderRadius,destination.roundedBorderRadius,percentage,0)},transformFont=function(target,origin,destination,percentage){target.font={};var ofont=origin.font||{},dfont=destination.font||{};target.font.size=transformNumber(ofont.size,dfont.size,percentage,0);var obaseline=CC.isString(ofont.baseline)?ofont.baseline:"top",dbaseline=CC.isString(dfont.baseline)?dfont.baseline:"top";target.font.baseline=obaseline!==dbaseline?50>percentage?ofont.baseline:dfont.baseline:ofont.baseline;var ostyle=CC.isString(ofont.style)?ofont.style:"normal",dstyle=CC.isString(dfont.style)?dfont.style:"normal";target.font.style=ostyle!==dstyle?50>percentage?ofont.style:dfont.style:ofont.style;var oweight=ofont.weight?ofont.weight:"normal",dweight=dfont.weight?dfont.weight:"normal";target.font.weight=oweight!==dweight?50>percentage?ofont.weight:dfont.weight:ofont.weight;var ofamily=CC.isString(ofont.family)?ofont.family:"sans-serif",dfamily=CC.isString(dfont.family)?dfont.family:"sans-serif";target.font.family=ofamily!==dfamily?50>percentage?ofont.family:dfont.family:ofont.family},transformAnchor=function(target,origin,destination,percentage,config,el){var oanchor=origin.anchor||el.anchor||{},danchor=destination.anchor||el.anchor||{};target.anchor={x:transformNumber(oanchor.x,danchor.x,percentage,config.EW/2),y:transformNumber(oanchor.y,danchor.y,percentage,config.EH/2)}},transformFlipAndScale=function(target,origin,destination,percentage){var oscalex=origin.scale&&CC.isNumber(origin.scale.x)?origin.scale.x:1,oscaley=origin.scale&&CC.isNumber(origin.scale.y)?origin.scale.y:1,dscalex=destination.scale&&CC.isNumber(destination.scale.x)?destination.scale.x:1,dscaley=destination.scale&&CC.isNumber(destination.scale.y)?destination.scale.y:1;CC.isString(origin.flip)&&(-1!=origin.flip.indexOf("x")&&(oscalex*=-1),-1!=origin.flip.indexOf("y")&&(oscaley*=-1)),CC.isString(destination.flip)&&(-1!=destination.flip.indexOf("x")&&(dscalex*=-1),-1!=destination.flip.indexOf("y")&&(dscaley*=-1)),target.scale={x:transformNumber(oscalex,dscalex,percentage,1),y:transformNumber(oscaley,dscaley,percentage,1)}},transformShadow=function(target,origin,destination,percentage){var oshadow=origin.shadow||{},dshadow=destination.shadow||{};target.shadow={blur:transformNumber(oshadow.blur,dshadow.blur,percentage,0),color:transformColor(oshadow.color,dshadow.color,percentage,"black"),x:transformNumber(oshadow.x,dshadow.x,percentage,0),y:transformNumber(oshadow.y,dshadow.y,percentage,0)}},transformFill=function(target,origin,destination,percentage){var ofill=origin.fill||{},dfill=destination.fill||{};target.fill={};var ocolor=ofill.color,dcolor=dfill.color,olinearg=ofill.linearGradient,dlinearg=dfill.linearGradient,oradialg=ofill.radialGradient,dradialg=dfill.radialGradient;ocolor&&!dcolor?olinearg?ocolor=void 0:dlinearg?(olinearg=createSolidGradient(ocolor,dlinearg),ocolor=void 0):dradialg&&(oradialg=createSolidGradient(ocolor,dradialg),ocolor=void 0):!ocolor&&dcolor&&(dlinearg?dcolor=void 0:olinearg?(dlinearg=createSolidGradient(dcolor,olinearg),dcolor=void 0):oradialg&&(dradialg=createSolidGradient(dcolor,oradialg),dcolor=void 0)),target.fill.color=transformColor(ocolor,dcolor,percentage,void 0),target.fill.linearGradient=transformLinearGradient(olinearg,dlinearg,percentage),target.fill.radialGradient=transformRadialGradient(oradialg,dradialg,percentage)},transformStroke=function(target,origin,destination,percentage){var ostroke=origin.stroke||{},dstroke=destination.stroke||{};target.stroke={};var ocolor=ostroke.color,dcolor=dstroke.color,olinearg=ostroke.linearGradient,dlinearg=dstroke.linearGradient,oradialg=ostroke.radialGradient,dradialg=dstroke.radialGradient;ocolor&&!dcolor?olinearg?ocolor=void 0:dlinearg?(olinearg=createSolidGradient(ocolor,dlinearg),ocolor=void 0):dradialg&&(oradialg=createSolidGradient(ocolor,dradialg),ocolor=void 0):!ocolor&&dcolor&&(dlinearg?dcolor=void 0:olinearg?(dlinearg=createSolidGradient(dcolor,olinearg),dcolor=void 0):oradialg&&(dradialg=createSolidGradient(dcolor,oradialg),dcolor=void 0)),target.stroke.color=transformColor(ocolor,dcolor,percentage,void 0),target.stroke.linearGradient=transformLinearGradient(olinearg,dlinearg,percentage),target.stroke.radialGradient=transformRadialGradient(oradialg,dradialg,percentage),target.stroke.thickness=transformNumber(ostroke.thickness,dstroke.thickness,percentage,0),target.stroke.cap=transformNoTween(ostroke.cap,dstroke.cap,percentage),target.stroke.join=transformNoTween(ostroke.join,dstroke.join,percentage),target.stroke.dash=transformNoTween(ostroke.dash,dstroke.dash,percentage)},transformSprite=function(target,origin,destination,percentage,config){var osprite=origin.sprite||{},dsprite=destination.sprite||{};if(target.sprite={},target.sprite.url=transformNoTween(osprite.url,dsprite.url,percentage),target.stroke.x=transformNumber(osprite.x,dsprite.x,percentage,0),target.stroke.y=transformNumber(osprite.y,dsprite.y,percentage,0),target.sprite.url&&target.sprite.url.length){var res=CC.useResource(target.sprite.url);target.sprite.w=transformNumber(osprite.w,dsprite.w,percentage,Math.min(config.FW,res.width)),target.sprite.h=transformNumber(osprite.h,dsprite.h,percentage,Math.min(config.FH,res.height))}target.stroke.delay=transformNumber(osprite.delay,dsprite.delay,percentage,1),target.stroke.frames=transformNumber(osprite.frames,dsprite.frames,percentage,1),target.sprite.vertical=transformNoTween(osprite.vertical,dsprite.vertical,percentage),target.sprite.repeat=transformNoTween(osprite.repeat,dsprite.repeat,percentage)},transformTiles=function(target,origin,destination,percentage){var otileSize=origin.tileSize||{},dtileSize=destination.tileSize||{};target.tileSize={},target.tileSize.w=transformNumber(otileSize.w,dtileSize.w,percentage,16),target.tileSize.h=transformNumber(otileSize.h,dtileSize.h,percentage,16),target.tiles=transformNoTween(origin.tiles,destination.tiles,percentage)}}(),function(){var requestAnimId,intervalAnimId,running=!1;CC.startLoop=function(){running=!0,CC.loadScreens();var mainloop=function(){CC.trigger("enterframe"),CC.draw()},animFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;if(null!==animFrame){var recursiveAnim=function(){mainloop(),requestAnimId=animFrame(recursiveAnim)};requestAnimId=animFrame(recursiveAnim)}else{var ONE_FRAME_TIME=1e3/60;intervalAnimId=setInterval(mainloop,ONE_FRAME_TIME)}},CC.stopLoop=function(){if(running=!1,requestAnimId){var cancelFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||null;null!==cancelFrame&&(cancelFrame(requestAnimId),requestAnimId=null)}intervalAnimId&&(clearInterval(intervalAnimId),intervalAnimId=null)},CC.isRunning=function(){return running}}();var creationCount=0,Element=function(specs,opts){var el=this,removed=!1,creationTime=(new Date).getTime(),creationOrder=creationCount++;this.classes={},this.layers={};var init=function(){var idArray;CC.isString(specs)&&(idArray=specs.match(/#[a-zA-Z0-9]*/)),idArray&&(el.id=idArray[0]),opts&&(el.x=opts.x,el.y=opts.y,el.w=opts.w,el.h=opts.h,el.angle=opts.angle,el.anchor=opts.anchor,el.flip=opts.flip,el.hidden=opts.hidden,el.zIndex=opts.zIndex,el.fixedOnScreen=opts.fixedOnScreen,el.clickable=opts.clickable!==!1),eventEnvironmentBuilder(el,function(){return!removed}),bindRemoveEvent(),CC.isString(specs)&&el.inherit(specs.replace(/#[a-zA-Z0-9]*/g,""),opts)};this.inherit=function(classesStr,opts){if(removed)return this;var classes=classesStr.split(" ");for(var i in classes){var s=classes[i];if(s.length&&!this.classes[s])if(this.classes[s]=CC.classes[s],CC.classes[s]&&CC.classes[s].constructors)for(var j in CC.classes[s].constructors){var c=CC.classes[s].constructors[j];c.call(this,opts)}else this.classes[s]={constructors:[]}}return this},this.matches=function(specs){var matchesRecursively=function(a,b){if(void 0===a||void 0===b)return!1;for(var i in b){if(void 0===a[i])return!1;if(CC.isObject(b[i])){if(matchesRecursively(a[i],b[i])===!1)return!1}else if(!CC.isString(b[i])||0!=b[i].indexOf("<")&&0!=b[i].indexOf(">")&&0!=b[i].indexOf("!=")){if(a[i]!==b[i])return!1}else{if(0==b[i].indexOf("<=")&&a[i]>b[i].replace("<=",""))return!1;if(0==b[i].indexOf("<")&&a[i]>=b[i].replace("<",""))return!1;if(0==b[i].indexOf(">=")&&a[i]<b[i].replace(">=",""))return!1;if(0==b[i].indexOf(">")&&a[i]<=b[i].replace(">",""))return!1;if(0==b[i].indexOf("!=")&&a[i]==b[i].replace("!=",""))return!1}}return!0};return matchesRecursively(this,specs)},this.merge=function(){if(!removed){var args=[].splice.call(arguments,0);return args.splice(0,0,this),CC.merge.apply(CC,args),this}},this.remove=function(){CC.remove(this)};var bindRemoveEvent=function(){el.bind("remove",function(){removed=!0})};this.removeClass=function(classe){void 0!==this.classes[classe]&&(this.trigger("removeClass."+classe),this.unbind("."+classe),delete this.classes[classe])},this.became=function(specs,action){var matched=!1;return CC.bind("enterframe",function(){var newmatched=el.matches(specs);!matched&&newmatched&&action.call(el),matched=newmatched})},this.while=function(specs,action){return CC.bind("enterframe",function(){el.matches(specs)&&action.call(el)})},this.hideAllLayers=function(){for(var i in this.layers)this.layers[i].hidden=!0},this.toggleLayers=function(toHide,toShow,steps,effect){if(!steps)return this.layers[toHide].hidden=!0,this.layers[toShow].hidden=!1,null;var opt={target:{},origin:this.layers[toHide],destination:this.layers[toShow],steps:steps,effect:effect},anim=CC.layerAnimation(this,opt);return anim.beforeStart(function(){opt.target={},el.layers["CCTemp-"+toHide+"-"+toShow]=opt.target,opt.origin=el.layers[toHide],opt.origin.hidden=!0,opt.destination=el.layers[toShow]}),anim.then(function(){delete el.layers["CCTemp-"+toHide+"-"+toShow],el.layers[toShow].hidden=!1}),anim},this.animateLayer=function(targetLayer,changes,steps,effect){var opt={target:{},origin:this.layers[targetLayer],destination:{},steps:steps,effect:effect},anim=CC.layerAnimation(this,opt);return anim.beforeStart(function(){opt.target={},el.layers["CCTemp-"+targetLayer]=opt.target,opt.origin=el.layers[targetLayer],opt.origin.hidden=!0,opt.destination=CC.merge({},el.layers[targetLayer],changes)}),anim.then(function(){delete el.layers["CCTemp-"+targetLayer],el.layers[targetLayer]=opt.destination,el.layers[targetLayer].hidden=!1}),anim},this.getCreationTime=function(){return creationTime},this.getCreationOrder=function(){return creationOrder},init()};CC.fn={};var ElementList=function(elements,selection){this.selection=selection,this.length=elements.length;var this_=this,init=function(){implementGlobalMethods()},implementGlobalMethods=function(){for(var i in CC.fn)CC.isFunction(CC.fn[i])&&(this_[i]=CC.fn[i])};this.each=function(action){for(var i in elements){var quitIfFalse=action.call(elements[i]);if(quitIfFalse===!1)break}return this},this.e=function(index){return elements[index]},this.asArray=function(){return elements.slice(0)},this.sort=function(){var args=[].slice.call(arguments,0);return args.unshift(elements),elements=CC.sort.apply(null,args),this},this.search=function(atrs){var result=[];return this.each(function(){var thisSearch=this.matches(atrs);thisSearch&&result.push(this)}),new ElementList(result,selection+"\n"+JSON.stringify(atrs)+"\n\n")},this.add=function(otherElements){if(null==otherElements)return this;if(CC.isString(otherElements))otherElements=CC(otherElements);else if(!CC.isFunction(otherElements.asArray))return this;var resultArray=elements.concat(otherElements.asArray()),resultSelection=this.selection+" + "+otherElements.selection;return new ElementList(resultArray,resultSelection)},this.sub=function(otherElements){if(null==otherElements)return this;if(CC.isString(otherElements))otherElements=CC(otherElements);else if(!CC.isFunction(otherElements.each))return this;var resultArray=this.asArray();otherElements.each(function(){var index=resultArray.indexOf(this);index>-1&&resultArray.splice(index,1)});var resultSelection=this.selection+" - "+otherElements.selection;return new ElementList(resultArray,resultSelection)},this.inherit=function(classesStr,opts){return this.each(function(){this.inherit(classesStr,opts)}),this},this.merge=function(obj){return this.each(function(){this.merge(obj)}),this},this.remove=function(){this.each(function(){this.remove()})},this.removeClass=function(classe){this.each(function(){this.removeClass(classe)})},this.bind=function(eventsStr,action){var listOfEvents=[];return this.each(function(){listOfEvents.push(this.bind(eventsStr,action))}),{unbind:function(){for(var i in listOfEvents)listOfEvents[i].unbind()}}},this.unbind=function(eventsStr,action){return this.each(function(){this.unbind(eventsStr,action)}),this},this.trigger=function(){var args=arguments;return this.each(function(){this.trigger.apply(this,args)}),this},this.became=function(){var args=arguments,listOfEvents=[];return this.each(function(){listOfEvents.push(this.became.apply(this,args))}),{unbind:function(){for(var i in listOfEvents)listOfEvents[i].unbind()}}},this.while=function(){var args=arguments,listOfEvents=[];return this.each(function(){listOfEvents.push(this.while.apply(this,args))}),{unbind:function(){for(var i in listOfEvents)listOfEvents[i].unbind()}}},this.hideAllLayers=function(){this.each(function(){this.hideAllLayers()})},this.toggleLayers=function(toHide,toShow){this.each(function(){this.toggleLayers(toHide,toShow)})},init()};return function(){CC.Animation=function(){var self=this,args=[].splice.call(arguments,0),loopers=args[0],totalsteps=args[1],effect=args[2],params=args[args.length-1],currentStep=0,finishedLoopers=0,pct=0,callbacks=[],beforeStart=[];CC.isArray(loopers)||(loopers=[loopers]),CC.isNumber(totalsteps)||(totalsteps=void 0),CC.isString(effect)||(effect=void 0),CC.isObject(params)||(params=void 0),this.isPlaying=!1,this.then=function(cb){callbacks.push(cb)},this.beforeStart=function(bf){beforeStart.push(bf)},this.removeCallback=function(cb){for(var i in callbacks)cb===callbacks[i]&&(callbacks[i]=null);for(var i in beforeStart)cb===beforeStart[i]&&(beforeStart[i]=null)},this.done=function(){this.pause(),currentStep=0,finishedLoopers=0,pct=0;for(var i in callbacks){var resp=null,cb=callbacks[i];cb&&(resp=cb()),resp&&CC.isFunction(resp.start)&&resp.isPlaying===!1&&resp.start()}},this.resume=function(){this.isPlaying||(this.isPlaying=!0,enterframe=CC.bind("enterframe",function(){var keepGoing=void 0;if(0===currentStep&&callBeforeStart(),void 0!==totalsteps){pct=CC.easing.linear(currentStep,0,100,totalsteps);var showPct=pct;if(CC.isFunction(CC.easing[effect])&&(showPct=CC.easing[effect](currentStep,0,100,totalsteps)),100>pct)for(var i in loopers)keepGoing=loopers[i].apply(CC,[showPct,params])}else for(var i in loopers)keepGoing=loopers[i].apply(CC,[currentStep,params]);keepGoing===!1&&finishedLoopers++,currentStep++,(pct>=100||finishedLoopers>=loopers.length)&&self.done()}))},this.pause=function(){this.isPlaying&&(this.isPlaying=!1,enterframe&&enterframe.unbind())},this.togglePause=function(){this.isPlaying?this.pause():this.resume()},this.start=function(){currentStep=0,this.resume()};var callBeforeStart=function(){for(var i in beforeStart)beforeStart[i]()};this.loop=function(){this.then(function(){self.start()}),this.start()}},CC.animationChain=function(animations){if(0===animations.length)return null;var totalAn=new CC.Animation,currentPlaying=0;for(var i in animations)CC.isNumber(animations[i])&&(animations[i]=new CC.Animation(function(){},animations[i])),function(){var index=parseInt(i);animations[i].then(function(){animations.length>index+1?(currentPlaying=index+1,animations[currentPlaying].start()):totalAn.done()})}();return totalAn.start=function(){currentPlaying=0,this.isPlaying=!0,animations[currentPlaying].start()},totalAn.resume=function(){this.isPlaying=!0,animations[currentPlaying].resume()},totalAn.pause=function(){this.isPlaying=!1,animations[currentPlaying].pause()},totalAn},CC.layerAnimation=function(element,opt){var animation=new CC.Animation(function(pct){CC.transformLayer(element,opt,pct)},opt.steps,opt.effect);return animation.beforeStart(function(){opt.target.zIndex!==opt.destination.zIndex&&(void 0===opt.target.zIndex&&(opt.target.zIndex=0),void 0===opt.destination.zIndex&&(opt.destination.zIndex=0))}),animation},CC.easing={linear:function(t,b,c,d){return c*t/d+b},easeInQuad:function(t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},easeInCubic:function(t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeInQuart:function(t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t+b:-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t*t+b:c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(t,b,c,d){return 0==t?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(t,b,c,d){return 0==t?b:t==d?b+c:(t/=d/2)<1?c/2*Math.pow(2,10*(t-1))+b:c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(t,b,c,d){return(t/=d/2)<1?-c/2*(Math.sqrt(1-t*t)-1)+b:c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p))+b},easeOutElastic:function(t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*2*Math.PI/p)+c+b},easeInOutElastic:function(t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(2==(t/=d/2))return b+c;if(p||(p=d*.3*1.5),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)+b:.5*a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)+c+b},easeInBack:function(t,b,c,d,s){return void 0==s&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(t,b,c,d,s){return void 0==s&&(s=1.70158),c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(t,b,c,d,s){return void 0==s&&(s=1.70158),(t/=d/2)<1?c/2*t*t*(((s*=1.525)+1)*t-s)+b:c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(t,b,c,d){return c-CC.easing.easeOutBounce(d-t,0,c,d)+b},easeOutBounce:function(t,b,c,d){return(t/=d)<1/2.75?c*7.5625*t*t+b:2/2.75>t?c*(7.5625*(t-=1.5/2.75)*t+.75)+b:2.5/2.75>t?c*(7.5625*(t-=2.25/2.75)*t+.9375)+b:c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},easeInOutBounce:function(t,b,c,d){return d/2>t?.5*CC.easing.easeInBounce(2*t,0,c,d)+b:.5*CC.easing.easeOutBounce(2*t-d,0,c,d)+.5*c+b}}}(),CC});